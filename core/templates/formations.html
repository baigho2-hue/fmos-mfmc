{% extends "base.html" %}
{% load static %}

{% block title %}Formations - FMOS MFMC{% endblock %}

{% block content %}
<h2>Formations</h2>
{% if not user.is_authenticated %}
<div class="alert-message">
    <p>‚ö†Ô∏è <strong>Acc√®s restreint :</strong> Vous devez √™tre connect√© pour acc√©der au contenu d√©taill√© des formations. <a href="{% url 'login' %}">Connectez-vous</a> ou <a href="{% url 'inscription' %}">cr√©ez un compte</a> pour continuer.</p>
</div>
{% else %}
<div class="inscription-link-box">
    <a href="{% url 'inscription_formations' %}" class="btn-inscription-principal">
        ‚úçÔ∏è S'inscrire aux formations
    </a>
</div>
{% endif %}
<p class="intro-text">D√©couvrez nos programmes de formation en m√©decine de famille et m√©decine communautaire. Nous proposons des formations certifiantes et non certifiantes adapt√©es √† vos besoins professionnels.</p>

<!-- Section Formations Certifiantes -->
<section id="certifiantes" class="formations-section">
    <h3 class="section-title">Formations Certifiantes</h3>
    <p class="section-description">Ces formations d√©livrent un dipl√¥me ou une certification reconnue √† l'issue de la formation.</p>
    
    <div class="formations-grid">
        <!-- DESMFMC -->
        <div class="formation-card">
            {% if not user.is_authenticated %}
            <div class="formation-card-buttons">
                <a href="{% url 'inscription' %}" class="btn-inscription-small">Inscription</a>
                <a href="{% url 'login' %}" class="btn-connexion-small">Connexion</a>
            </div>
            {% endif %}
            <div class="formation-icon">üéì</div>
            <h4><a href="{% url 'programme_desmfmc' %}" class="formation-title-link">DESMFMC</a></h4>
            <p>Dipl√¥me d'√âtudes Sp√©cialis√©es en M√©decine de Famille et M√©decine Communautaire. Programme de 4 ans pour devenir sp√©cialiste en m√©decine de famille.</p>
            <a href="{% url 'programme_desmfmc' %}" class="formation-link">En savoir plus ‚Üí</a>
        </div>

        <!-- Sant√© Communautaire -->
        <div class="formation-card">
            {% if not user.is_authenticated %}
            <div class="formation-card-buttons">
                <a href="{% url 'inscription' %}" class="btn-inscription-small">Inscription</a>
                <a href="{% url 'login' %}" class="btn-connexion-small">Connexion</a>
            </div>
            {% endif %}
            <div class="formation-icon">üè•</div>
            <h4><a href="{% url 'programme_sante_communautaire' %}" class="formation-title-link">Sant√© Communautaire</a></h4>
            <p>Formation approfondie en sant√© communautaire pour am√©liorer la sant√© des populations √† travers des approches pr√©ventives et communautaires.</p>
            <a href="{% url 'programme_sante_communautaire' %}" class="formation-link">En savoir plus ‚Üí</a>
        </div>

        <!-- Recherche -->
        <div class="formation-card">
            {% if not user.is_authenticated %}
            <div class="formation-card-buttons">
                <a href="{% url 'inscription' %}" class="btn-inscription-small">Inscription</a>
                <a href="{% url 'login' %}" class="btn-connexion-small">Connexion</a>
            </div>
            {% endif %}
            <div class="formation-icon">üî¨</div>
            <h4><a href="{% url 'programme_recherche' %}" class="formation-title-link">Recherche</a></h4>
            <p>Formation en m√©thodologie de recherche et en conduite de projets de recherche en sant√© communautaire et m√©decine de famille.</p>
            <a href="{% url 'programme_recherche' %}" class="formation-link">En savoir plus ‚Üí</a>
        </div>

        <!-- Logiciels d'analyse (Certifiant) -->
        <div class="formation-card">
            {% if not user.is_authenticated %}
            <div class="formation-card-buttons">
                <a href="{% url 'inscription' %}" class="btn-inscription-small">Inscription</a>
                <a href="{% url 'login' %}" class="btn-connexion-small">Connexion</a>
            </div>
            {% endif %}
            <div class="formation-icon">üíª</div>
            <h4><a href="{% url 'programme_logiciels_analyse' %}" class="formation-title-link">Logiciels d'analyse</a></h4>
            <p>Formation certifiante sur les logiciels d'analyse statistique et de gestion de donn√©es pour la recherche m√©dicale.</p>
            <a href="{% url 'programme_logiciels_analyse' %}" class="formation-link">En savoir plus ‚Üí</a>
        </div>

        <!-- √âchographie de base -->
        <div class="formation-card">
            {% if not user.is_authenticated %}
            <div class="formation-card-buttons">
                <a href="{% url 'inscription' %}" class="btn-inscription-small">Inscription</a>
                <a href="{% url 'login' %}" class="btn-connexion-small">Connexion</a>
            </div>
            {% endif %}
            <div class="formation-icon">üì°</div>
            <h4><a href="{% url 'echographie_base' %}" class="formation-title-link">√âchographie de base</a></h4>
            <p>Formation certifiante en √©chographie de base pour la pratique m√©dicale en soins primaires et en m√©decine de famille.</p>
            <a href="{% url 'echographie_base' %}" class="formation-link">En savoir plus ‚Üí</a>
        </div>

        <!-- P√©dagogie en sant√© -->
        <div class="formation-card">
            {% if not user.is_authenticated %}
            <div class="formation-card-buttons">
                <a href="{% url 'inscription' %}" class="btn-inscription-small">Inscription</a>
                <a href="{% url 'login' %}" class="btn-connexion-small">Connexion</a>
            </div>
            {% endif %}
            <div class="formation-icon">üìö</div>
            <h4><a href="{% url 'programme_pedagogie_sante' %}" class="formation-title-link">P√©dagogie en sant√©</a></h4>
            <p>Formation certifiante en p√©dagogie m√©dicale pour d√©velopper les comp√©tences d'enseignement et de formation en sant√©.</p>
            <a href="{% url 'programme_pedagogie_sante' %}" class="formation-link">En savoir plus ‚Üí</a>
        </div>
    </div>
</section>

<!-- Section Formations Non Certifiantes -->
<section id="non-certifiantes" class="formations-section">
    <h3 class="section-title">Formations Non Certifiantes</h3>
    <p class="section-description">Ces formations permettent d'acqu√©rir des comp√©tences sp√©cifiques sans d√©livrer de dipl√¥me officiel.</p>
    
    <div class="formations-grid">
        <!-- Cours M√©decine 6 -->
        <div class="formation-card">
            {% if not user.is_authenticated %}
            <div class="formation-card-buttons">
                <a href="{% url 'inscription' %}" class="btn-inscription-small">Inscription</a>
                <a href="{% url 'login' %}" class="btn-connexion-small">Connexion</a>
            </div>
            {% endif %}
            <div class="formation-icon">üìñ</div>
            <h4><a href="{% url 'cours_med6' %}" class="formation-title-link">Cours M√©decine 6</a></h4>
            <p>Cours de renforcement pour les √©tudiants en 6√®me ann√©e de m√©decine, couvrant les aspects essentiels de la pratique clinique.</p>
            <a href="{% url 'cours_med6' %}" class="formation-link">En savoir plus ‚Üí</a>
        </div>

        <!-- Habilit√©s Cliniques -->
        <div class="formation-card">
            {% if not user.is_authenticated %}
            <div class="formation-card-buttons">
                <a href="{% url 'inscription' %}" class="btn-inscription-small">Inscription</a>
                <a href="{% url 'login' %}" class="btn-connexion-small">Connexion</a>
            </div>
            {% endif %}
            <div class="formation-icon">‚öïÔ∏è</div>
            <h4><a href="{% url 'habilites_cliniques' %}" class="formation-title-link">Habilit√©s Cliniques</a></h4>
            <p>Formation pratique pour d√©velopper et renforcer les habilit√©s cliniques essentielles en m√©decine de famille.</p>
            <a href="{% url 'habilites_cliniques' %}" class="formation-link">En savoir plus ‚Üí</a>
        </div>

        <!-- Logiciels d'analyse (Non certifiant) -->
        <div class="formation-card">
            {% if not user.is_authenticated %}
            <div class="formation-card-buttons">
                <a href="{% url 'inscription' %}" class="btn-inscription-small">Inscription</a>
                <a href="{% url 'login' %}" class="btn-connexion-small">Connexion</a>
            </div>
            {% endif %}
            <div class="formation-icon">üíª</div>
            <h4><a href="{% url 'logiciels_analyse_noncertif' %}" class="formation-title-link">Logiciels d'analyse</a></h4>
            <p>Formation non certifiante sur les outils et logiciels d'analyse de donn√©es pour la pratique m√©dicale quotidienne.</p>
            <a href="{% url 'logiciels_analyse_noncertif' %}" class="formation-link">En savoir plus ‚Üí</a>
        </div>

        <!-- Base en p√©dagogie -->
        <div class="formation-card">
            {% if not user.is_authenticated %}
            <div class="formation-card-buttons">
                <a href="{% url 'inscription' %}" class="btn-inscription-small">Inscription</a>
                <a href="{% url 'login' %}" class="btn-connexion-small">Connexion</a>
            </div>
            {% endif %}
            <div class="formation-icon">üéØ</div>
            <h4><a href="{% url 'base_pedagogie' %}" class="formation-title-link">Base en p√©dagogie</a></h4>
            <p>Formation de base en p√©dagogie pour am√©liorer les comp√©tences d'enseignement et de transmission des connaissances.</p>
            <a href="{% url 'base_pedagogie' %}" class="formation-link">En savoir plus ‚Üí</a>
        </div>

        <!-- Autres programmes -->
        <div class="formation-card">
            {% if not user.is_authenticated %}
            <div class="formation-card-buttons">
                <a href="{% url 'inscription' %}" class="btn-inscription-small">Inscription</a>
                <a href="{% url 'login' %}" class="btn-connexion-small">Connexion</a>
            </div>
            {% endif %}
            <div class="formation-icon">üìã</div>
            <h4><a href="{% url 'autres_programmes' %}" class="formation-title-link">Autres programmes</a></h4>
            <p>D√©couvrez nos autres programmes de formation continue et de d√©veloppement professionnel.</p>
            <a href="{% url 'autres_programmes' %}" class="formation-link">En savoir plus ‚Üí</a>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_css %}
<style>
.alert-message {
    background-color: #fff3cd;
    border: 2px solid #ffc107;
    border-radius: 8px;
    padding: 1.5rem;
    margin-bottom: 2rem;
    color: #856404;
}

.alert-message a {
    color: #005a9c;
    font-weight: bold;
    text-decoration: underline;
}

.alert-message a:hover {
    color: #004070;
}

.access-restricted {
    background-color: #f8d7da;
    border: 2px solid #dc3545;
    border-radius: 8px;
    padding: 2rem;
    text-align: center;
    margin: 2rem 0;
}

.access-restricted p {
    margin: 0.5rem 0;
    color: #721c24;
}

.access-restricted a {
    color: #005a9c;
    font-weight: bold;
    text-decoration: underline;
}

.formation-content {
    line-height: 1.8;
}

.formation-content h3 {
    color: #005a9c;
    margin-top: 2rem;
    margin-bottom: 1rem;
}

.formation-content ul {
    margin-left: 2rem;
    margin-bottom: 1.5rem;
}

.formation-content li {
    margin-bottom: 0.5rem;
}

.inscription-link-box {
    text-align: center;
    margin: 2rem 0;
}

.btn-inscription-principal {
    display: inline-block;
    background-color: #005a9c;
    color: white;
    padding: 1rem 2.5rem;
    font-size: 1.2rem;
    font-weight: bold;
    text-decoration: none;
    border-radius: 8px;
    transition: all 0.3s ease;
    box-shadow: 0 4px 8px rgba(0, 90, 156, 0.2);
}

.btn-inscription-principal:hover {
    background-color: #004070;
    transform: translateY(-2px);
    box-shadow: 0 6px 12px rgba(0, 90, 156, 0.3);
}

.intro-text {
    font-size: 1.1rem;
    line-height: 1.8;
    margin-bottom: 3rem;
    color: #555;
    text-align: center;
    max-width: 800px;
    margin-left: auto;
    margin-right: auto;
}

.formations-section {
    margin-bottom: 4rem;
    scroll-margin-top: 100px; /* Compensation pour le header fixe lors du scroll */
}

.section-title {
    color: #005a9c;
    font-size: 2rem;
    margin-bottom: 0.5rem;
    padding-bottom: 0.5rem;
    border-bottom: 3px solid #005a9c;
}

.section-description {
    color: #666;
    font-size: 1rem;
    margin-bottom: 2rem;
    font-style: italic;
}

.formations-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 2rem;
    margin-top: 2rem;
}

.formation-card {
    background-color: #ffffff;
    border: 2px solid #e0e0e0;
    border-radius: 8px;
    padding: 2rem;
    transition: all 0.3s ease;
    display: flex;
    flex-direction: column;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    position: relative;
}

.formation-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 4px 16px rgba(0, 90, 156, 0.2);
    border-color: #005a9c;
}

.formation-icon {
    font-size: 3rem;
    margin-bottom: 1rem;
    text-align: center;
}

.formation-card h4 {
    color: #005a9c;
    font-size: 1.5rem;
    margin-bottom: 1rem;
    margin-top: 0;
}

.formation-title-link {
    color: #005a9c;
    text-decoration: none;
    transition: color 0.3s ease;
}

.formation-title-link:hover {
    color: #004070;
    text-decoration: underline;
}

.formation-card p {
    color: #555;
    line-height: 1.6;
    margin-bottom: 1.5rem;
    flex-grow: 1;
}

.formation-link {
    color: #005a9c;
    text-decoration: none;
    font-weight: bold;
    display: inline-block;
    transition: color 0.3s ease;
    margin-top: auto;
}

.formation-link:hover {
    color: #004070;
    text-decoration: underline;
}

.formation-card-buttons {
    position: absolute;
    top: 0.75rem;
    left: 0;
    right: 0;
    display: flex;
    justify-content: space-between;
    padding: 0 0.75rem;
    z-index: 10;
    pointer-events: none;
}

.formation-card-buttons a {
    pointer-events: auto;
}

.btn-inscription-small,
.btn-connexion-small {
    padding: 0.4rem 0.8rem !important;
    border-radius: 4px !important;
    font-weight: 600 !important;
    text-decoration: none !important;
    transition: all 0.2s ease !important;
    font-size: 0.75rem !important;
    white-space: nowrap !important;
    cursor: pointer !important;
    border: 2px solid #495057 !important;
    display: inline-block !important;
    text-align: center !important;
    width: auto !important;
    background-color: #6c757d !important;
    background-image: linear-gradient(to bottom, #7d8489 0%, #6c757d 50%, #5a6268 100%) !important;
    color: #ffffff !important;
    text-shadow: 0 1px 1px rgba(0, 0, 0, 0.3) !important;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.15) !important;
}

.btn-inscription-small:hover,
.btn-connexion-small:hover {
    background-image: linear-gradient(to bottom, #6c757d 0%, #5a6268 50%, #495057 100%) !important;
    border-color: #343a40 !important;
    transform: translateY(-1px) !important;
    box-shadow: 0 3px 6px rgba(0, 0, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.2) !important;
}

.btn-inscription-small:active,
.btn-connexion-small:active {
    transform: translateY(0) !important;
    background-image: linear-gradient(to bottom, #5a6268 0%, #495057 100%) !important;
    box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.4) !important;
    border-color: #343a40 !important;
}

/* Responsive */
@media screen and (max-width: 768px) {
    .formations-grid {
        grid-template-columns: 1fr;
        gap: 1.5rem;
    }
    
    .section-title {
        font-size: 1.75rem;
    }
    
    .formation-card {
        padding: 1.5rem;
    }
}

@media screen and (max-width: 480px) {
    .intro-text {
        font-size: 1rem;
    }
    
    .section-title {
        font-size: 1.5rem;
    }
    
    .formation-card {
        padding: 1rem;
    }
    
    .formation-icon {
        font-size: 2.5rem;
    }
}
</style>
{% endblock %}
