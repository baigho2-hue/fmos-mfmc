{% extends "base.html" %}
{% load static %}

{% block title %}Inscription - FMOS MFMC{% endblock %}

{% block content %}
<h2>Inscription</h2>
<p class="intro-inscription">Choisissez votre type de compte pour commencer votre inscription.</p>

<div class="inscription-tabs">
    <button class="tab-button active" onclick="showTab('etudiant')">Étudiant</button>
    <button class="tab-button" onclick="showTab('enseignant')">Enseignant</button>
</div>

<!-- Formulaire Étudiant -->
<div id="form-etudiant" class="inscription-form active">
    <h3>Inscription Étudiant</h3>
    <form method="POST" id="etudiant-form">
        {% csrf_token %}
        <input type="hidden" name="type_utilisateur" value="etudiant">
        
        <div class="form-group">
            <label for="id_username_etudiant">Nom d'utilisateur *</label>
            <input type="text" name="username" id="id_username_etudiant" class="form-control" required>
        </div>
        
        <div class="form-group">
            <label for="id_first_name_etudiant">Prénom *</label>
            <input type="text" name="first_name" id="id_first_name_etudiant" class="form-control" required>
        </div>
        
        <div class="form-group">
            <label for="id_last_name_etudiant">Nom *</label>
            <input type="text" name="last_name" id="id_last_name_etudiant" class="form-control" required>
        </div>
        
        <div class="form-group">
            <label for="id_email_etudiant">Adresse e-mail *</label>
            <input type="email" name="email" id="id_email_etudiant" class="form-control" required>
        </div>
        
        <div class="form-group">
            <label for="id_email_confirmation_etudiant">Confirmer l'adresse e-mail *</label>
            <input type="email" name="email_confirmation" id="id_email_confirmation_etudiant" class="form-control" required>
        </div>
        
        <div class="form-group">
            <label for="id_classe_etudiant">Classe *</label>
            <input type="text" name="classe" id="id_classe_etudiant" class="form-control" required placeholder="Ex: Médecine 6, DESMFMC 1ère année">
            <small class="form-help">Indiquez votre classe ou niveau de formation</small>
        </div>
        
        <div class="form-group">
            <label for="id_password1_etudiant">Mot de passe *</label>
            <input type="password" name="password1" id="id_password1_etudiant" class="form-control" required>
        </div>
        
        <div class="form-group">
            <label for="id_password2_etudiant">Confirmer le mot de passe *</label>
            <input type="password" name="password2" id="id_password2_etudiant" class="form-control" required>
        </div>
        
        <button type="submit" class="btn-submit">S'inscrire en tant qu'étudiant</button>
    </form>
</div>

<!-- Formulaire Enseignant -->
<div id="form-enseignant" class="inscription-form">
    <h3>Inscription Enseignant</h3>
    <form method="POST" id="enseignant-form">
        {% csrf_token %}
        <input type="hidden" name="type_utilisateur" value="enseignant">
        
        <div class="form-group">
            <label for="id_username_enseignant">Nom d'utilisateur *</label>
            <input type="text" name="username" id="id_username_enseignant" class="form-control" required>
        </div>
        
        <div class="form-group">
            <label for="id_first_name_enseignant">Prénom *</label>
            <input type="text" name="first_name" id="id_first_name_enseignant" class="form-control" required>
        </div>
        
        <div class="form-group">
            <label for="id_last_name_enseignant">Nom *</label>
            <input type="text" name="last_name" id="id_last_name_enseignant" class="form-control" required>
        </div>
        
        <div class="form-group">
            <label for="id_email_enseignant">Adresse e-mail *</label>
            <input type="email" name="email" id="id_email_enseignant" class="form-control" required>
        </div>
        
        <div class="form-group">
            <label for="id_email_confirmation_enseignant">Confirmer l'adresse e-mail *</label>
            <input type="email" name="email_confirmation" id="id_email_confirmation_enseignant" class="form-control" required>
        </div>
        
        <div class="form-group">
            <label for="id_matieres_enseignant">Matières enseignées *</label>
            <textarea name="matieres" id="id_matieres_enseignant" class="form-control" rows="3" required placeholder="Ex: Médecine de famille, Santé communautaire, Recherche"></textarea>
            <small class="form-help">Liste des matières que vous enseignez, séparées par des virgules</small>
        </div>
        
        <div class="form-group">
            <label for="id_password1_enseignant">Mot de passe *</label>
            <input type="password" name="password1" id="id_password1_enseignant" class="form-control" required>
        </div>
        
        <div class="form-group">
            <label for="id_password2_enseignant">Confirmer le mot de passe *</label>
            <input type="password" name="password2" id="id_password2_enseignant" class="form-control" required>
        </div>
        
        <button type="submit" class="btn-submit">S'inscrire en tant qu'enseignant</button>
    </form>
</div>

<p class="login-link"><a href="{% url 'login' %}">Déjà inscrit ? Connexion</a></p>
{% endblock %}

{% block extra_css %}
<style>
.intro-inscription {
    text-align: center;
    margin-bottom: 2rem;
    color: #666;
}

.inscription-tabs {
    display: flex;
    gap: 1rem;
    margin-bottom: 2rem;
    border-bottom: 2px solid #e0e0e0;
}

.tab-button {
    padding: 1rem 2rem;
    background: none;
    border: none;
    border-bottom: 3px solid transparent;
    cursor: pointer;
    font-size: 1.1rem;
    color: #666;
    transition: all 0.3s ease;
}

.tab-button:hover {
    color: #005a9c;
}

.tab-button.active {
    color: #005a9c;
    border-bottom-color: #005a9c;
    font-weight: bold;
}

.inscription-form {
    display: none;
    max-width: 600px;
    margin: 0 auto;
    background: #ffffff;
    padding: 2rem;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.inscription-form.active {
    display: block;
}

.inscription-form h3 {
    color: #005a9c;
    margin-bottom: 1.5rem;
    text-align: center;
}

.form-group {
    margin-bottom: 1.5rem;
}

.form-group label {
    display: block;
    margin-bottom: 0.5rem;
    color: #333;
    font-weight: 500;
}

.form-control {
    width: 100%;
    padding: 0.75rem;
    border: 1px solid #ddd;
    border-radius: 5px;
    font-size: 1rem;
    box-sizing: border-box;
}

.form-control:focus {
    outline: none;
    border-color: #005a9c;
    box-shadow: 0 0 0 2px rgba(0, 90, 156, 0.1);
}

.form-help {
    display: block;
    margin-top: 0.25rem;
    font-size: 0.875rem;
    color: #666;
}

.btn-submit {
    width: 100%;
    padding: 1rem;
    background-color: #005a9c;
    color: #ffffff;
    border: none;
    border-radius: 5px;
    font-size: 1.1rem;
    font-weight: bold;
    cursor: pointer;
    transition: background-color 0.3s ease;
    margin-top: 1rem;
}

.btn-submit:hover {
    background-color: #004070;
}

.login-link {
    text-align: center;
    margin-top: 2rem;
}

.login-link a {
    color: #005a9c;
    text-decoration: underline;
}

@media screen and (max-width: 768px) {
    .inscription-form {
        padding: 1.5rem;
    }
    
    .tab-button {
        padding: 0.75rem 1rem;
        font-size: 1rem;
    }
}
</style>
{% endblock %}

{% block extra_js %}
<script>
function showTab(type) {
    // Masquer tous les formulaires
    document.querySelectorAll('.inscription-form').forEach(form => {
        form.classList.remove('active');
    });
    
    // Retirer la classe active de tous les boutons
    document.querySelectorAll('.tab-button').forEach(btn => {
        btn.classList.remove('active');
    });
    
    // Afficher le formulaire sélectionné
    document.getElementById('form-' + type).classList.add('active');
    
    // Activer le bouton correspondant
    event.target.classList.add('active');
}
</script>
{% endblock %}
